
<html>
<head>
<title>printers.c</title>
<link rel="stylesheet" type="text/css" href="./viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #include &lt;stdio.h&gt;</div><div id="2" class="line none">    2 #include &lt;stdlib.h&gt;</div><div id="3" class="line none">    3 #include &lt;string.h&gt;</div><div id="4" class="line none">    4 #include "../include/constants.h"</div><div id="5" class="line none">    5 #include "../include/types.h"</div><div id="6" class="line none">    6 #include "../include/getters.h"</div><div id="7" class="line none">    7 </div><div id="8" class="line none">    8 void <a href="printers.c.html#8">prettyPrintPayContract</a>(const PayParameters* payParams) {</div><div id="9" class="line missed">    9     printf("%s has PAID %s from its internal account to their outside wallet the amount of %d %s\n",</div><div id="10" class="line missed">   10        payParams-&gt;payer-&gt;name, payParams-&gt;receiver-&gt;name,</div><div id="11" class="line missed">   11        payParams-&gt;amount, <a href="getters.c.html#7">getCurrencyTypeName</a>(payParams-&gt;currency));</div><div id="12" class="line missed">   12 }</div><div id="13" class="line none">   13 </div><div id="14" class="line none">   14 void <a href="printers.c.html#14">prettyPrintDepositContract</a>(const DepositParameters* depositParams) {</div><div id="15" class="line missed">   15     printf("%s has DEPOSITED into the internal account of %s the amount of %d %s\n",</div><div id="16" class="line missed">   16            depositParams-&gt;depositor-&gt;name, depositParams-&gt;receiver-&gt;name,</div><div id="17" class="line missed">   17            depositParams-&gt;amount, <a href="getters.c.html#7">getCurrencyTypeName</a>(depositParams-&gt;currency));</div><div id="18" class="line missed">   18 }</div><div id="19" class="line none">   19 </div><div id="20" class="line none">   20 </div><div id="21" class="line none">   21 void <a href="printers.c.html#21">prettyPrintWholeContractState</a>(const ContractState* state, int currentTime) {</div><div id="22" class="line missed">   22     printf("###########################################\n");</div><div id="23" class="line missed">   23     printf("#         STATE OF THE SIMULATION         #\n");</div><div id="24" class="line missed">   24     printf("###########################################\n\n");</div><div id="25" class="line missed">   25     printf("Current time is: %d\n\n", currentTime);</div><div id="26" class="line missed">   26     printf("-------------------------------------------\n");</div><div id="27" class="line missed">   27     printf("Party private holdings:\n");</div><div id="28" class="line none">   28 </div><div id="29" class="line missed">   29     for (int i = 0; i &lt; state-&gt;numParties; i++) {</div><div id="30" class="line missed">   30         printf("%s has the following holdings in their wallet:\n", state-&gt;parties[i]-&gt;name);</div><div id="31" class="line missed">   31         for (int j = 0; j &lt; NUMTOKENS; j++) {</div><div id="32" class="line missed">   32             const Token* token = &amp;state-&gt;parties[i]-&gt;wallet.tokens[j];</div><div id="33" class="line missed">   33             printf("\t%d %s\n", token-&gt;amount, <a href="getters.c.html#7">getCurrencyTypeName</a>(token-&gt;currency));</div><div id="34" class="line missed">   34         }</div><div id="35" class="line missed">   35         printf("\n");</div><div id="36" class="line missed">   36     }</div><div id="37" class="line missed">   37     printf("-------------------------------------------\n");</div><div id="38" class="line missed">   38     printf("Internal wallet holdings:\n");</div><div id="39" class="line missed">   39     for (int i = 0; i &lt; state-&gt;internalWallet.numAccounts; i++) {</div><div id="40" class="line missed">   40         const char* partyName = NULL;</div><div id="41" class="line missed">   41         for (int j = 0; j &lt; state-&gt;numParties; j++) {</div><div id="42" class="line missed">   42             if (state-&gt;parties[j]-&gt;id == state-&gt;internalWallet.accounts[i].id) {</div><div id="43" class="line missed">   43                 partyName = state-&gt;parties[j]-&gt;name;</div><div id="44" class="line missed">   44                 break;</div><div id="45" class="line none">   45             }</div><div id="46" class="line missed">   46         }</div><div id="47" class="line missed">   47         if (partyName) {</div><div id="48" class="line missed">   48             printf("%s (Internal Account ID: %d) has the following holdings:\n", partyName, state-&gt;internalWallet.accounts[i].id);</div><div id="49" class="line missed">   49             for (int j = 0; j &lt; NUMTOKENS; j++) {</div><div id="50" class="line missed">   50                 const Token* token = &amp;state-&gt;internalWallet.accounts[i].wallet.tokens[j];</div><div id="51" class="line missed">   51                 printf("\t%d %s\n", token-&gt;amount, <a href="getters.c.html#7">getCurrencyTypeName</a>(token-&gt;currency));</div><div id="52" class="line missed">   52             }</div><div id="53" class="line missed">   53             printf("\n");</div><div id="54" class="line none">   54         }</div><div id="55" class="line missed">   55     }</div><div id="56" class="line missed">   56     if (state-&gt;currentContract) {</div><div id="57" class="line missed">   57         printf("Next Contract:\n");</div><div id="58" class="line missed">   58         switch (state-&gt;currentContract-&gt;type) {</div><div id="59" class="line missed">   59             case DEPOSIT:</div><div id="60" class="line missed">   60                 printf("Type: DEPOSIT\n");</div><div id="61" class="line missed">   61                 printf("Parameters: depositor=%s, receiver=%s, amount=%d, currency=%s, timeout=%d\n",</div><div id="62" class="line missed">   62                        <a href="getters.c.html#20">getPartyTypeName</a>(state-&gt;currentContract-&gt;params.depositParams.depositor),</div><div id="63" class="line missed">   63                        <a href="getters.c.html#20">getPartyTypeName</a>(state-&gt;currentContract-&gt;params.depositParams.receiver),</div><div id="64" class="line missed">   64                        state-&gt;currentContract-&gt;params.depositParams.amount,</div><div id="65" class="line missed">   65                        <a href="getters.c.html#7">getCurrencyTypeName</a>(state-&gt;currentContract-&gt;params.depositParams.currency),</div><div id="66" class="line missed">   66                        state-&gt;currentContract-&gt;params.depositParams.timeout);</div><div id="67" class="line missed">   67                 break;</div><div id="68" class="line missed">   68             case PAY:</div><div id="69" class="line missed">   69                 printf("Type: PAY\n");</div><div id="70" class="line missed">   70                 printf("Parameters: payer=%s, receiver=%s, amount=%d, currency=%s\n",</div><div id="71" class="line missed">   71                        <a href="getters.c.html#20">getPartyTypeName</a>(state-&gt;currentContract-&gt;params.payParams.payer),</div><div id="72" class="line missed">   72                        <a href="getters.c.html#20">getPartyTypeName</a>(state-&gt;currentContract-&gt;params.payParams.receiver),</div><div id="73" class="line missed">   73                        state-&gt;currentContract-&gt;params.payParams.amount,</div><div id="74" class="line missed">   74                        <a href="getters.c.html#7">getCurrencyTypeName</a>(state-&gt;currentContract-&gt;params.payParams.currency));</div><div id="75" class="line missed">   75                 break;</div><div id="76" class="line missed">   76             case CLOSE:</div><div id="77" class="line missed">   77                 printf("Type: CLOSE\n");</div><div id="78" class="line missed">   78                 printf("Parameters: id=%d\n", state-&gt;currentContract-&gt;params.closeParams.id);</div><div id="79" class="line missed">   79                 break;</div><div id="80" class="line none">   80             default:</div><div id="81" class="line missed">   81                 printf("Unknown Contract Type\n");</div><div id="82" class="line missed">   82                 break;</div><div id="83" class="line missed">   83         }</div><div id="84" class="line none">   84     } else {</div><div id="85" class="line missed">   85         printf("No Next Contract\n");</div><div id="86" class="line none">   86     }</div><div id="87" class="line missed">   87     printf("###########################################\n\n");</div><div id="88" class="line missed">   88 }</div>
</div>
</body>
</html>
