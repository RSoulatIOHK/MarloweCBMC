
<html>
<head>
<title>setters.c</title>
<link rel="stylesheet" type="text/css" href="./viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #include &lt;stdio.h&gt;</div><div id="2" class="line none">    2 #include &lt;stdlib.h&gt;</div><div id="3" class="line none">    3 #include &lt;string.h&gt;</div><div id="4" class="line none">    4 #include "../include/constants.h"</div><div id="5" class="line none">    5 #include "../include/types.h"</div><div id="6" class="line none">    6 </div><div id="7" class="line none">    7 </div><div id="8" class="line none">    8 Token* <a href="setters.c.html#8">newTokenHolding</a>(CurrencyType currency, int amount) {</div><div id="9" class="line missed">    9     Token* token = malloc(sizeof(Token));</div><div id="10" class="line missed">   10     token-&gt;currency = currency;</div><div id="11" class="line missed">   11     token-&gt;amount = amount;</div><div id="12" class="line missed">   12     return token;</div><div id="13" class="line missed">   13 }</div><div id="14" class="line none">   14 </div><div id="15" class="line none">   15 // Function to create a new wallet</div><div id="16" class="line none">   16 Wallet* <a href="setters.c.html#16">newWallet</a>(Token tokens[], int numTokens) {</div><div id="17" class="line hit">   17     Wallet* wallet = malloc(sizeof(Wallet));</div><div id="18" class="line hit">   18     wallet-&gt;tokens = malloc(sizeof(Token) * numTokens);</div><div id="19" class="line hit">   19     memcpy(wallet-&gt;tokens, tokens, sizeof(Token) * numTokens);</div><div id="20" class="line hit">   20     wallet-&gt;numTokens = numTokens;</div><div id="21" class="line hit">   21     return wallet;</div><div id="22" class="line hit">   22 }</div><div id="23" class="line none">   23 </div><div id="24" class="line none">   24 // Function to create a new party</div><div id="25" class="line none">   25 Party* <a href="setters.c.html#25">newParty</a>(const char* name, int id, Wallet* wallet) {</div><div id="26" class="line hit">   26     Party* party = malloc(sizeof(Party));</div><div id="27" class="line hit">   27     party-&gt;name = name;</div><div id="28" class="line hit">   28     party-&gt;id = id;</div><div id="29" class="line hit">   29     memcpy(&amp;party-&gt;wallet, wallet, sizeof(Wallet));</div><div id="30" class="line hit">   30     return party;</div><div id="31" class="line hit">   31 }</div><div id="32" class="line none">   32 </div><div id="33" class="line none">   33 // Function to create a new internal account</div><div id="34" class="line none">   34 InternalAccount* <a href="setters.c.html#34">newInternalAccount</a>(int id, Wallet wallet) {</div><div id="35" class="line missed">   35     InternalAccount* account = malloc(sizeof(InternalAccount));</div><div id="36" class="line missed">   36     account-&gt;id = id;</div><div id="37" class="line missed">   37     memcpy(&amp;(account-&gt;wallet), &amp;wallet, sizeof(Wallet));</div><div id="38" class="line missed">   38     return account;</div><div id="39" class="line missed">   39 }</div><div id="40" class="line none">   40 </div><div id="41" class="line none">   41 // Function to create a new internal wallet</div><div id="42" class="line none">   42 InternalWallet* <a href="setters.c.html#42">newInternalWallet</a>(InternalAccount accounts[], int numAccounts) {</div><div id="43" class="line hit">   43     InternalWallet* wallet = malloc(sizeof(InternalWallet));</div><div id="44" class="line hit">   44     wallet-&gt;accounts = malloc(sizeof(InternalAccount) * numAccounts);</div><div id="45" class="line hit">   45     memcpy(wallet-&gt;accounts, accounts, sizeof(InternalAccount) * numAccounts);</div><div id="46" class="line hit">   46     wallet-&gt;numAccounts = numAccounts;</div><div id="47" class="line hit">   47     return wallet;</div><div id="48" class="line hit">   48 }</div><div id="49" class="line none">   49 </div><div id="50" class="line none">   50 ContractState* <a href="setters.c.html#50">newContractState</a>(Contract* currentContract, InternalWallet* internalWallet, Party* parties[], int numParties) {</div><div id="51" class="line hit">   51     ContractState* state = malloc(sizeof(ContractState));</div><div id="52" class="line hit">   52     state-&gt;currentContract = currentContract;</div><div id="53" class="line hit">   53     memcpy(&amp;state-&gt;internalWallet, internalWallet, sizeof(InternalWallet));</div><div id="54" class="line hit">   54     state-&gt;parties = malloc(sizeof(Party*) * numParties);</div><div id="55" class="line hit">   55     memcpy(state-&gt;parties, parties, sizeof(Party*) * numParties);</div><div id="56" class="line hit">   56     state-&gt;numParties = numParties;</div><div id="57" class="line hit">   57     return state;</div><div id="58" class="line hit">   58 }</div><div id="59" class="line none">   59 </div><div id="60" class="line none">   60 Contract* <a href="setters.c.html#60">newContract</a>(ContractType type, ContractParameters params, Contract* subContractOK, Contract* continueAs) {</div><div id="61" class="line hit">   61     Contract* contract = malloc(sizeof(Contract));</div><div id="62" class="line hit">   62     contract-&gt;type = type;</div><div id="63" class="line hit">   63     memcpy(&amp;(contract-&gt;params), &amp;params, sizeof(ContractParameters));</div><div id="64" class="line hit">   64     contract-&gt;subContractOK = subContractOK;</div><div id="65" class="line hit">   65     contract-&gt;continueAs = continueAs;</div><div id="66" class="line hit">   66     return contract;</div><div id="67" class="line hit">   67 }</div>
</div>
</body>
</html>
